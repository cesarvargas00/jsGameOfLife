<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script>
      LADO = 12;
      TAM_CANVAS = 600;

      function desenhaGrid(context){
        context.lineWidth = 1;
        for(i = LADO;i<TAM_CANVAS;i=i+LADO){
  	      context.moveTo(i,0);
  		    context.lineTo(i,TAM_CANVAS);
  	      context.stroke();
    	  }
    	  for(i = LADO;i<TAM_CANVAS;i=i+LADO){
  	      context.moveTo(0,i);
  		    context.lineTo(TAM_CANVAS,i);
          context.stroke();
    	  }
      }

      function getMousePos(canvas, evt) {
        var rect = canvas.getBoundingClientRect(), root = document.documentElement;
        var mouseX = evt.clientX -rect.top -root.scrollTop;
        var mouseY = evt.clientY -rect.left -root.scrollLeft;
        return {
          x: parseInt(mouseX/LADO),
          y: parseInt(mouseY/LADO)
        };
      }

      function paintSquare(mousePos) {
        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');
        context.fillStyle = "rgb(0,0,0)";
        context.fillRect(mousePos.x*LADO,mousePos.y*LADO,LADO,LADO);
      }

      window.onload = function() {
        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');
        desenhaGrid(context);
        canvas.addEventListener('mousemove', function(evt) {
          var coords = document.getElementById('coords');
          var mousePos = getMousePos(canvas, evt);
          coords.innerHTML = mousePos.x + ',' + mousePos.y;
        }, false);

        canvas.addEventListener('click', function(evt) {
          var mousePos = getMousePos(canvas, evt);
          paintSquare(mousePos);
        }, false);

      };

    </script>
  </head>
  <body>
    <canvas id="myCanvas" width="600" height="600"></canvas>
    <p id="coords"></p>
  </body>
</html>
